(()=>{var e={437:(e,r,n)=>{var t,o=function(e){var r="b",n="w",t=-1,o="p",i="k",a="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",u=["1-0","0-1","1/2-1/2","*"],f={b:[16,32,17,15],w:[-16,-32,-17,-15]},l={n:[-18,-33,-31,-14,18,33,31,14],b:[-17,-15,17,15],r:[-16,1,16,-1],q:[-17,-16,-15,1,17,16,15,-1],k:[-17,-16,-15,1,17,16,15,-1]},c=[20,0,0,0,0,0,0,24,0,0,0,0,0,0,20,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,24,24,24,24,24,24,56,0,56,24,24,24,24,24,24,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,20,0,0,0,0,0,0,24,0,0,0,0,0,0,20],s=[17,0,0,0,0,0,0,16,0,0,0,0,0,0,15,0,0,17,0,0,0,0,0,16,0,0,0,0,0,15,0,0,0,0,17,0,0,0,0,16,0,0,0,0,15,0,0,0,0,0,0,17,0,0,0,16,0,0,0,15,0,0,0,0,0,0,0,0,17,0,0,16,0,0,15,0,0,0,0,0,0,0,0,0,0,17,0,16,0,15,0,0,0,0,0,0,0,0,0,0,0,0,17,16,15,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,-15,-16,-17,0,0,0,0,0,0,0,0,0,0,0,0,-15,0,-16,0,-17,0,0,0,0,0,0,0,0,0,0,-15,0,0,-16,0,0,-17,0,0,0,0,0,0,0,0,-15,0,0,0,-16,0,0,0,-17,0,0,0,0,0,0,-15,0,0,0,0,-16,0,0,0,0,-17,0,0,0,0,-15,0,0,0,0,0,-16,0,0,0,0,0,-17,0,0,-15,0,0,0,0,0,0,-16,0,0,0,0,0,0,-17],p={p:0,n:1,b:2,r:3,q:4,k:5},h={NORMAL:"n",CAPTURE:"c",BIG_PAWN:"b",EP_CAPTURE:"e",PROMOTION:"p",KSIDE_CASTLE:"k",QSIDE_CASTLE:"q"},v={NORMAL:1,CAPTURE:2,BIG_PAWN:4,EP_CAPTURE:8,PROMOTION:16,KSIDE_CASTLE:32,QSIDE_CASTLE:64},g={a8:0,b8:1,c8:2,d8:3,e8:4,f8:5,g8:6,h8:7,a7:16,b7:17,c7:18,d7:19,e7:20,f7:21,g7:22,h7:23,a6:32,b6:33,c6:34,d6:35,e6:36,f6:37,g6:38,h6:39,a5:48,b5:49,c5:50,d5:51,e5:52,f5:53,g5:54,h5:55,a4:64,b4:65,c4:66,d4:67,e4:68,f4:69,g4:70,h4:71,a3:80,b3:81,c3:82,d3:83,e3:84,f3:85,g3:86,h3:87,a2:96,b2:97,c2:98,d2:99,e2:100,f2:101,g2:102,h2:103,a1:112,b1:113,c1:114,d1:115,e1:116,f1:117,g1:118,h1:119},d={w:[{square:g.a1,flag:v.QSIDE_CASTLE},{square:g.h1,flag:v.KSIDE_CASTLE}],b:[{square:g.a8,flag:v.QSIDE_CASTLE},{square:g.h8,flag:v.KSIDE_CASTLE}]},m=new Array(128),b={w:t,b:t},E=n,_={w:0,b:0},w=t,S=0,y=1,A=[],C={},I={};function T(e){void 0===e&&(e=!1),m=new Array(128),b={w:t,b:t},E=n,_={w:0,b:0},w=t,S=0,y=1,A=[],e||(C={}),I={},q(O())}function R(){for(var e=[],r={},n=function(e){e in I&&(r[e]=I[e])};A.length>0;)e.push(V());for(n(O());e.length>0;)z(e.pop()),n(O());I=r}function P(){k(a)}function k(e,o){void 0===o&&(o=!1);var i=e.split(/\s+/),a=i[0],u=0;if(!L(e).valid)return!1;T(o);for(var f=0;f<a.length;f++){var l=a.charAt(f);if("/"===l)u+=8;else if(-1!=="0123456789".indexOf(l))u+=parseInt(l,10);else{var c=l<"a"?n:r;x({type:l.toLowerCase(),color:c},Y(u)),u++}}return E=i[1],i[2].indexOf("K")>-1&&(_.w|=v.KSIDE_CASTLE),i[2].indexOf("Q")>-1&&(_.w|=v.QSIDE_CASTLE),i[2].indexOf("k")>-1&&(_.b|=v.KSIDE_CASTLE),i[2].indexOf("q")>-1&&(_.b|=v.QSIDE_CASTLE),w="-"===i[3]?t:g[i[3]],S=parseInt(i[4],10),y=parseInt(i[5],10),q(O()),!0}function L(e){var r=e.split(/\s+/);if(6!==r.length)return{valid:!1,error_number:1,error:"FEN string must contain six space-delimited fields."};if(isNaN(r[5])||parseInt(r[5],10)<=0)return{valid:!1,error_number:2,error:"6th field (move number) must be a positive integer."};if(isNaN(r[4])||parseInt(r[4],10)<0)return{valid:!1,error_number:3,error:"5th field (half move counter) must be a non-negative integer."};if(!/^(-|[abcdefgh][36])$/.test(r[3]))return{valid:!1,error_number:4,error:"4th field (en-passant square) is invalid."};if(!/^(KQ?k?q?|Qk?q?|kq?|q|-)$/.test(r[2]))return{valid:!1,error_number:5,error:"3rd field (castling availability) is invalid."};if(!/^(w|b)$/.test(r[1]))return{valid:!1,error_number:6,error:"2nd field (side to move) is invalid."};var n=r[0].split("/");if(8!==n.length)return{valid:!1,error_number:7,error:"1st field (piece positions) does not contain 8 '/'-delimited rows."};for(var t=0;t<n.length;t++){for(var o=0,i=!1,a=0;a<n[t].length;a++)if(isNaN(n[t][a])){if(!/^[prnbqkPRNBQK]$/.test(n[t][a]))return{valid:!1,error_number:9,error:"1st field (piece positions) is invalid [invalid piece]."};o+=1,i=!1}else{if(i)return{valid:!1,error_number:8,error:"1st field (piece positions) is invalid [consecutive numbers]."};o+=parseInt(n[t][a],10),i=!0}if(8!==o)return{valid:!1,error_number:10,error:"1st field (piece positions) is invalid [row too large]."}}return"3"==r[3][1]&&"w"==r[1]||"6"==r[3][1]&&"b"==r[1]?{valid:!1,error_number:11,error:"Illegal en-passant square"}:{valid:!0,error_number:0,error:"No errors."}}function O(){for(var e=0,r="",o=g.a8;o<=g.h1;o++){if(null==m[o])e++;else{e>0&&(r+=e,e=0);var i=m[o].color,a=m[o].type;r+=i===n?a.toUpperCase():a.toLowerCase()}o+1&136&&(e>0&&(r+=e),o!==g.h1&&(r+="/"),e=0,o+=8)}var u="";_.w&v.KSIDE_CASTLE&&(u+="K"),_.w&v.QSIDE_CASTLE&&(u+="Q"),_.b&v.KSIDE_CASTLE&&(u+="k"),_.b&v.QSIDE_CASTLE&&(u+="q"),u=u||"-";var f=w===t?"-":Y(w);return[r,E,u,f,S,y].join(" ")}function N(e){for(var r=0;r<e.length;r+=2)"string"==typeof e[r]&&"string"==typeof e[r+1]&&(C[e[r]]=e[r+1]);return C}function q(e){A.length>0||(e!==a?(C.SetUp="1",C.FEN=e):(delete C.SetUp,delete C.FEN))}function D(e){var r=m[g[e]];return r?{type:r.type,color:r.color}:null}function x(e,r){if(!("type"in e)||!("color"in e))return!1;if(-1==="pnbrqkPNBRQK".indexOf(e.type.toLowerCase()))return!1;if(!(r in g))return!1;var n=g[r];return(e.type!=i||b[e.color]==t||b[e.color]==n)&&(m[n]={type:e.type,color:e.color},e.type===i&&(b[e.color]=n),q(O()),!0)}function U(e,r,n,t,i){var a={color:E,from:r,to:n,flags:t,piece:e[r].type};return i&&(a.flags|=v.PROMOTION,a.promotion=i),e[n]?a.captured=e[n].type:t&v.EP_CAPTURE&&(a.captured=o),a}function K(e){function r(e,r,n,t,i){if(e[n].type!==o||0!==J(t)&&7!==J(t))r.push(U(e,n,t,i));else for(var a=["q","r","b","n"],u=0,f=a.length;u<f;u++)r.push(U(e,n,t,i,a[u]))}var n=[],t=E,i=ee(t),a={b:1,w:6},u=g.a8,c=g.h1,s=!1,p=void 0===e||!("legal"in e)||e.legal;if(void 0!==e&&"square"in e){if(!(e.square in g))return[];u=c=g[e.square],s=!0}for(var h=u;h<=c;h++)if(136&h)h+=7;else{var d=m[h];if(null!=d&&d.color===t)if(d.type===o){var S=h+f[t][0];for(null==m[S]&&(r(m,n,h,S,v.NORMAL),S=h+f[t][1],a[t]===J(h)&&null==m[S]&&r(m,n,h,S,v.BIG_PAWN)),y=2;y<4;y++)136&(S=h+f[t][y])||(null!=m[S]&&m[S].color===i?r(m,n,h,S,v.CAPTURE):S===w&&r(m,n,h,w,v.EP_CAPTURE))}else for(var y=0,A=l[d.type].length;y<A;y++){var C=l[d.type][y];for(S=h;!(136&(S+=C));){if(null!=m[S]){if(m[S].color===t)break;r(m,n,h,S,v.CAPTURE);break}if(r(m,n,h,S,v.NORMAL),"n"===d.type||"k"===d.type)break}}}if(!s||c===b[t]){if(_[t]&v.KSIDE_CASTLE){var I=(T=b[t])+2;null!=m[T+1]||null!=m[I]||$(i,b[t])||$(i,T+1)||$(i,I)||r(m,n,b[t],I,v.KSIDE_CASTLE)}var T;if(_[t]&v.QSIDE_CASTLE)I=(T=b[t])-2,null!=m[T-1]||null!=m[T-2]||null!=m[T-3]||$(i,b[t])||$(i,T-1)||$(i,I)||r(m,n,b[t],I,v.QSIDE_CASTLE)}if(!p)return n;var R=[];for(h=0,A=n.length;h<A;h++)z(n[h]),B(t)||R.push(n[h]),V();return R}function Q(e,r){var n="";if(e.flags&v.KSIDE_CASTLE)n="O-O";else if(e.flags&v.QSIDE_CASTLE)n="O-O-O";else{var t=function(e,r){for(var n=K({legal:!r}),t=e.from,o=e.to,i=e.piece,a=0,u=0,f=0,l=0,c=n.length;l<c;l++){var s=n[l].from,p=n[l].to;i===n[l].piece&&t!==s&&o===p&&(a++,J(t)===J(s)&&u++,X(t)===X(s)&&f++)}return a>0?u>0&&f>0?Y(t):f>0?Y(t).charAt(1):Y(t).charAt(0):""}(e,r);e.piece!==o&&(n+=e.piece.toUpperCase()+t),e.flags&(v.CAPTURE|v.EP_CAPTURE)&&(e.piece===o&&(n+=Y(e.from)[0]),n+="x"),n+=Y(e.to),e.flags&v.PROMOTION&&(n+="="+e.promotion.toUpperCase())}return z(e),M()&&(F()?n+="#":n+="+"),V(),n}function j(e){return e.replace(/=/,"").replace(/[+#]?[?!]*$/,"")}function $(e,t){for(var i=g.a8;i<=g.h1;i++)if(136&i)i+=7;else if(null!=m[i]&&m[i].color===e){var a=m[i],u=i-t,f=u+119;if(c[f]&1<<p[a.type]){if(a.type===o){if(u>0){if(a.color===n)return!0}else if(a.color===r)return!0;continue}if("n"===a.type||"k"===a.type)return!0;for(var l=s[f],h=i+l,v=!1;h!==t;){if(null!=m[h]){v=!0;break}h+=l}if(!v)return!0}}return!1}function B(e){return $(ee(e),b[e])}function M(){return B(E)}function F(){return M()&&0===K().length}function G(){return!M()&&0===K().length}function W(){for(var e={},r=[],n=0,t=0,o=g.a8;o<=g.h1;o++)if(t=(t+1)%2,136&o)o+=7;else{var i=m[o];i&&(e[i.type]=i.type in e?e[i.type]+1:1,"b"===i.type&&r.push(t),n++)}if(2===n)return!0;if(3===n&&(1===e.b||1===e.n))return!0;if(n===e.b+2){var a=0,u=r.length;for(o=0;o<u;o++)a+=r[o];if(0===a||a===u)return!0}return!1}function H(){for(var e=[],r={},n=!1;;){var t=V();if(!t)break;e.push(t)}for(;;){var o=O().split(" ").slice(0,4).join(" ");if(r[o]=o in r?r[o]+1:1,r[o]>=3&&(n=!0),!e.length)break;z(e.pop())}return n}function z(e){var n=E,a=ee(n);if(function(e){A.push({move:e,kings:{b:b.b,w:b.w},turn:E,castling:{b:_.b,w:_.w},ep_square:w,half_moves:S,move_number:y})}(e),m[e.to]=m[e.from],m[e.from]=null,e.flags&v.EP_CAPTURE&&(E===r?m[e.to-16]=null:m[e.to+16]=null),e.flags&v.PROMOTION&&(m[e.to]={type:e.promotion,color:n}),m[e.to].type===i){if(b[m[e.to].color]=e.to,e.flags&v.KSIDE_CASTLE){var u=e.to-1,f=e.to+1;m[u]=m[f],m[f]=null}else e.flags&v.QSIDE_CASTLE&&(u=e.to+1,f=e.to-2,m[u]=m[f],m[f]=null);_[n]=""}if(_[n])for(var l=0,c=d[n].length;l<c;l++)if(e.from===d[n][l].square&&_[n]&d[n][l].flag){_[n]^=d[n][l].flag;break}if(_[a])for(l=0,c=d[a].length;l<c;l++)if(e.to===d[a][l].square&&_[a]&d[a][l].flag){_[a]^=d[a][l].flag;break}w=e.flags&v.BIG_PAWN?"b"===E?e.to-16:e.to+16:t,e.piece===o||e.flags&(v.CAPTURE|v.EP_CAPTURE)?S=0:S++,E===r&&y++,E=ee(E)}function V(){var e=A.pop();if(null==e)return null;var n=e.move;b=e.kings,E=e.turn,_=e.castling,w=e.ep_square,S=e.half_moves,y=e.move_number;var t,i,a=E,u=ee(E);if(m[n.from]=m[n.to],m[n.from].type=n.piece,m[n.to]=null,n.flags&v.CAPTURE)m[n.to]={type:n.captured,color:u};else if(n.flags&v.EP_CAPTURE){var f;f=a===r?n.to-16:n.to+16,m[f]={type:o,color:u}}return n.flags&(v.KSIDE_CASTLE|v.QSIDE_CASTLE)&&(n.flags&v.KSIDE_CASTLE?(t=n.to+1,i=n.to-1):n.flags&v.QSIDE_CASTLE&&(t=n.to-2,i=n.to+1),m[t]=m[i],m[i]=null),n}function Z(e,r){var n=j(e);if(r){var t=n.match(/([pnbrqkPNBRQK])?([a-h][1-8])x?-?([a-h][1-8])([qrbnQRBN])?/);if(t)var o=t[1],i=t[2],a=t[3],u=t[4]}for(var f=K(),l=0,c=f.length;l<c;l++){if(n===j(Q(f[l]))||r&&n===j(Q(f[l],!0)))return f[l];if(t&&(!o||o.toLowerCase()==f[l].piece)&&g[i]==f[l].from&&g[a]==f[l].to&&(!u||u.toLowerCase()==f[l].promotion))return f[l]}return null}function J(e){return e>>4}function X(e){return 15&e}function Y(e){var r=X(e),n=J(e);return"abcdefgh".substring(r,r+1)+"87654321".substring(n,n+1)}function ee(e){return e===n?r:n}function re(e){var r=ne(e);r.san=Q(r,!1),r.to=Y(r.to),r.from=Y(r.from);var n="";for(var t in v)v[t]&r.flags&&(n+=h[t]);return r.flags=n,r}function ne(e){var r=e instanceof Array?[]:{};for(var n in e)r[n]="object"==typeof n?ne(e[n]):e[n];return r}function te(e){return e.replace(/^\s+|\s+$/g,"")}function oe(e){for(var r=K({legal:!1}),n=0,t=E,o=0,i=r.length;o<i;o++)z(r[o]),B(t)||(e-1>0?n+=oe(e-1):n++),V();return n}return k(void 0===e?a:e),{WHITE:n,BLACK:r,PAWN:o,KNIGHT:"n",BISHOP:"b",ROOK:"r",QUEEN:"q",KING:i,SQUARES:function(){for(var e=[],r=g.a8;r<=g.h1;r++)136&r?r+=7:e.push(Y(r));return e}(),FLAGS:h,load:function(e){return k(e)},reset:function(){return P()},moves:function(e){for(var r=K(e),n=[],t=0,o=r.length;t<o;t++)void 0!==e&&"verbose"in e&&e.verbose?n.push(re(r[t])):n.push(Q(r[t],!1));return n},in_check:function(){return M()},in_checkmate:function(){return F()},in_stalemate:function(){return G()},in_draw:function(){return S>=100||G()||W()||H()},insufficient_material:function(){return W()},in_threefold_repetition:function(){return H()},game_over:function(){return S>=100||F()||G()||W()||H()},validate_fen:function(e){return L(e)},fen:function(){return O()},board:function(){for(var e=[],r=[],n=g.a8;n<=g.h1;n++)null==m[n]?r.push(null):r.push({type:m[n].type,color:m[n].color}),n+1&136&&(e.push(r),r=[],n+=8);return e},pgn:function(e){var r="object"==typeof e&&"string"==typeof e.newline_char?e.newline_char:"\n",n="object"==typeof e&&"number"==typeof e.max_width?e.max_width:0,t=[],o=!1;for(var i in C)t.push("["+i+' "'+C[i]+'"]'+r),o=!0;o&&A.length&&t.push(r);for(var a=function(e){var r=I[O()];return void 0!==r&&(e=`${e}${e.length>0?" ":""}{${r}}`),e},u=[];A.length>0;)u.push(V());var f=[],l="";for(0===u.length&&f.push(a(""));u.length>0;){l=a(l);var c=u.pop();A.length||"b"!==c.color?"w"===c.color&&(l.length&&f.push(l),l=y+"."):l=y+". ...",l=l+" "+Q(c,!1),z(c)}if(l.length&&f.push(a(l)),void 0!==C.Result&&f.push(C.Result),0===n)return t.join("")+f.join(" ");var s=function(){return t.length>0&&" "===t[t.length-1]&&(t.pop(),!0)},p=function(e,o){for(var i of o.split(" "))if(i){if(e+i.length>n){for(;s();)e--;t.push(r),e=0}t.push(i),e+=i.length,t.push(" "),e++}return s()&&e--,e},h=0;for(i=0;i<f.length;i++)h+f[i].length>n&&f[i].includes("{")?h=p(h,f[i]):(h+f[i].length>n&&0!==i?(" "===t[t.length-1]&&t.pop(),t.push(r),h=0):0!==i&&(t.push(" "),h++),t.push(f[i]),h+=f[i].length);return t.join("")},load_pgn:function(e,r){var n=void 0!==r&&"sloppy"in r&&r.sloppy;function t(e){return e.replace(/\\/g,"\\")}var o="object"==typeof r&&"string"==typeof r.newline_char?r.newline_char:"\r?\n",i=new RegExp("^(\\[((?:"+t(o)+")|.)*\\])(?:"+t(o)+"){2}"),a=i.test(e)?i.exec(e)[1]:"";P();var f=function(e,r){for(var n="object"==typeof r&&"string"==typeof r.newline_char?r.newline_char:"\r?\n",o={},i=e.split(new RegExp(t(n))),a="",u="",f=0;f<i.length;f++)a=i[f].replace(/^\[([A-Z][A-Za-z]*)\s.*\]$/,"$1"),u=i[f].replace(/^\[[A-Za-z]+\s"(.*)"\ *\]$/,"$1"),te(a).length>0&&(o[a]=u);return o}(a,r);for(var l in f)N([l,f[l]]);if(!("1"!==f.SetUp||"FEN"in f&&k(f.FEN,!0)))return!1;for(var c=function(e){return`{${function(e){return Array.from(e).map((function(e){return e.charCodeAt(0)<128?e.charCodeAt(0).toString(16):encodeURIComponent(e).replace(/\%/g,"").toLowerCase()})).join("")}((e=e.replace(new RegExp(t(o),"g")," ")).slice(1,e.length-1))}}`},s=function(e){if(e.startsWith("{")&&e.endsWith("}"))return function(e){return 0==e.length?"":decodeURIComponent("%"+e.match(/.{1,2}/g).join("%"))}(e.slice(1,e.length-1))},p=e.replace(a,"").replace(new RegExp(`({[^}]*})+?|;([^${t(o)}]*)`,"g"),(function(e,r,n){return void 0!==r?c(r):" "+c(`{${n.slice(1)}}`)})).replace(new RegExp(t(o),"g")," "),h=/(\([^\(\)]+\))+?/g;h.test(p);)p=p.replace(h,"");var v=te(p=(p=(p=p.replace(/\d+\.(\.\.)?/g,"")).replace(/\.\.\./g,"")).replace(/\$\d+/g,"")).split(new RegExp(/\s+/));v=v.join(",").replace(/,,+/g,",").split(",");for(var g="",d=0;d<v.length-1;d++){var m=s(v[d]);if(void 0===m){if(null==(g=Z(v[d],n)))return!1;z(g)}else I[O()]=m}if(void 0!==(m=s(v[v.length-1]))&&(I[O()]=m,v.pop()),g=v[v.length-1],u.indexOf(g)>-1)(function(e){for(var r in e)return!0;return!1})(C)&&void 0===C.Result&&N(["Result",g]);else{if(null==(g=Z(g,n)))return!1;z(g)}return!0},header:function(){return N(arguments)},ascii:function(){return function(){for(var e="   +------------------------+\n",r=g.a8;r<=g.h1;r++){if(0===X(r)&&(e+=" "+"87654321"[J(r)]+" |"),null==m[r])e+=" . ";else{var t=m[r].type;e+=" "+(m[r].color===n?t.toUpperCase():t.toLowerCase())+" "}r+1&136&&(e+="|\n",r+=8)}return(e+="   +------------------------+\n")+"     a  b  c  d  e  f  g  h\n"}()},turn:function(){return E},move:function(e,r){var n=void 0!==r&&"sloppy"in r&&r.sloppy,t=null;if("string"==typeof e)t=Z(e,n);else if("object"==typeof e)for(var o=K(),i=0,a=o.length;i<a;i++)if(e.from===Y(o[i].from)&&e.to===Y(o[i].to)&&(!("promotion"in o[i])||e.promotion===o[i].promotion)){t=o[i];break}if(!t)return null;var u=re(t);return z(t),u},undo:function(){var e=V();return e?re(e):null},clear:function(){return T()},put:function(e,r){return x(e,r)},get:function(e){return D(e)},remove:function(e){return function(e){var r=D(e);return m[g[e]]=null,r&&r.type===i&&(b[r.color]=t),q(O()),r}(e)},perft:function(e){return oe(e)},square_color:function(e){if(e in g){var r=g[e];return(J(r)+X(r))%2==0?"light":"dark"}return null},history:function(e){for(var r=[],n=[],t=(void 0!==e&&"verbose"in e&&e.verbose);A.length>0;)r.push(V());for(;r.length>0;){var o=r.pop();t?n.push(re(o)):n.push(Q(o)),z(o)}return n},get_comment:function(){return I[O()]},set_comment:function(e){I[O()]=e.replace("{","[").replace("}","]")},delete_comment:function(){var e=I[O()];return delete I[O()],e},get_comments:function(){return R(),Object.keys(I).map((function(e){return{fen:e,comment:I[e]}}))},delete_comments:function(){return R(),Object.keys(I).map((function(e){var r=I[e];return delete I[e],{fen:e,comment:r}}))}}};r.Chess=o,void 0===(t=function(){return o}.call(r,n,r,e))||(e.exports=t)}},r={};function n(t){var o=r[t];if(void 0!==o)return o.exports;var i=r[t]={exports:{}};return e[t](i,i.exports,n),i.exports}n.n=e=>{var r=e&&e.__esModule?()=>e.default:()=>e;return n.d(r,{a:r}),r},n.d=(e,r)=>{for(var t in r)n.o(r,t)&&!n.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:r[t]})},n.o=(e,r)=>Object.prototype.hasOwnProperty.call(e,r),(()=>{"use strict";var e=n(437);const r=new(n.n(e)()),t=Chessboard("chessboard","start"),o={a:["Alpha","alpha"],b:["Beta","beta","Bravo","bravo"],c:["Charlie","charlie"],d:["Delta","delta"],e:["Echo","echo"],g:["Golf","golf"],f:["Fox","fox"],h:["Hotel","hotel"]},i={1:["1","One","one"],2:["2","Two","two","to"],3:["3","Three","three"],4:["4","Four","four","full","before"],5:["5","Five","five","V","v"],6:["6","Six","six"],7:["7","Seven","seven"],8:["8","Eight","eight"]},a={r:"rook",n:"knight",b:"bishop",k:"king",q:"queen",p:"pawn"},u={b:"black",w:"white"};window.SpeechRecognition=window.SpeechRecognition||window.webkitSpeechRecognition;const f=new SpeechRecognition;f.lang="en-GB";const l=window.speechSynthesis;function c(e){const r=new SpeechSynthesisUtterance(e);r.voice=l.getVoices()[3],speechSynthesis.speak(r)}window.addEventListener("keypress",(function(e){"Space"==e.code&&f.start()}));let s="";function p(e,r){for(const[n,t]of Object.entries(e))if(t.includes(r))return n;throw new g("Value not found in object")}function h(e){try{return p(o,e)}catch(e){throw new g("File not found")}}function v(e){try{return p(i,e)}catch(e){throw new g("Rank not found")}}function g(e){this.message=e,this.name="InvalidParameter"}function d(e){this.message=e,this.name="InvalidSize"}function m(e){this.message=e,this.name="InvalidMove"}f.onresult=function(e){s=e.results[0][0].transcript,console.log("speech: "+s)},f.onend=function(){f.stop(),function(e){try{let n=function(e){return e.split(" ")}(e);"look"==n[0]?function(e){let n=h(e[1])+v(e[2]),t=r.get(n);c("There is a "+u[t.color]+" "+a[t.type]+" at there")}(n):(function(e){const n=function(e){if(4!=e.length)throw new d("Speech must include 4 words");return{from:h(e[0])+v(e[1]),to:h(e[2])+v(e[3])}}(e);if(!r.moves({square:n.from}).includes(n.to))throw new m("Invalid move");r.move({from:n.from,to:n.to}),t.move(n.from+"-"+n.to)}(n),function(){const e=r.moves(),n=e[Math.floor(Math.random()*e.length)];c("I played");for(var o=0;o<n.length;o++)c(n.charAt(o));const i=r.move(n);t.move(i.from+"-"+i.to)}())}catch(e){console.error(e),c(e.message)}}(s)}})()})();